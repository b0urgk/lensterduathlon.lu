<div class="logo-container">
    <div class="logo-text">
        <a href="/" style="text-decoration: none">
            <h1 style="font-size: 1.7rem">LÃ«nster Duathlon</h1>
            <p><%=content.logoTagline%></p>
        </a>
    </div>
    <div class="desktop-logo">
        <a href="https://greisch-steve.foyer.lu">
            <img src="/public/images/sponsor-greisch-steve.foyer.png" alt="Logo" class="logo-image">
        </a>
    </div>
    <div class="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>
</div>
<nav>
    <ul>
        <li><a href="/<%=lang%>/race-info"><%=content.navInfo%></a></li>
        <li class="dropdown">
            <button class="dropbtn"><%=content.navRoutes%>
            </button>
            <div class="dropdown-content">
                <a href="/<%=lang%>/races/kids-distance"><%=content.navRoutesKids%></a>
                <a href="/<%=lang%>/races/short-distance"><%=content.navRoutesYouthB%></a>
                <a href="/<%=lang%>/races/long-distance"><%=content.navRoutesElite%></a>
                <a href="/<%=lang%>/races/middle-distance"><%=content.navRoutesYouthA%></a>
            </div>
        </li>
        <li><a href="/<%=lang%>/archive"><%=content.navArchive%></a></li>
        <li><a href="/<%=lang%>/partners"><%=content.navSponsors%></a></li>
        <li><a href="/<%=lang%>/volunteers"><%=content.navVolunteers%></a></li>
        <li><a href="/<%=lang%>/contact"><%=content.navContact%></a></li>
        <li class="language-selector">
            <div class="language-dropdown">
                <button class="language-dropbtn">
                    <%
                    let currentLangFlag = '';
                    switch(lang) {
                        case 'en':
                            currentLangFlag = 'ðŸ‡¬ðŸ‡§';
                            break;
                        case 'de':
                            currentLangFlag = 'ðŸ‡©ðŸ‡ª';
                            break;
                        case 'fr':
                            currentLangFlag = 'ðŸ‡«ðŸ‡·';
                            break;
                        default:
                            currentLangFlag = 'ðŸŒ';
                    }
                    %>
                    <%= currentLangFlag %>
                </button>
                <div class="language-dropdown-content">
                    <% if (lang !== 'en') { %>
                        <a href="/en" class="language-option" data-lang="en">
                            <span>ðŸ‡¬ðŸ‡§</span> English
                        </a>
                    <% } %>
                    <% if (lang !== 'de') { %>
                        <a href="/de" class="language-option" data-lang="de">
                            <span>ðŸ‡©ðŸ‡ª</span> Deutsch
                        </a>
                    <% } %>
                    <% if (lang !== 'fr') { %>
                        <a href="/fr" class="language-option" data-lang="fr">
                            <span>ðŸ‡«ðŸ‡·</span> FranÃ§ais
                        </a>
                    <% } %>
                </div>
            </div>
        </li>
    </ul>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get the current path after the language prefix
        const currentPath = window.location.pathname.replace(/^\/(en|de|fr)/, '');

        // Select all language switch links in both header and footer
        const languageLinks = document.querySelectorAll('.language-dropdown-content a');

        // Update each language link to include the current path
        languageLinks.forEach(link => {
            const lang = link.getAttribute('data-lang');
            link.href = `/${lang}${currentPath}`;
        });
    });
</script>